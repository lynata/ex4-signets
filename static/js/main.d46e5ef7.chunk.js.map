{"version":3,"sources":["composants/Entete.jsx","images/couverture.webp","composants/Dossier.jsx","firebase.js","composants/ListeDossiers.jsx","composants/Accueil.jsx","composants/AjouterDossier.jsx","composants/Appli.jsx","index.jsx"],"names":["Entete","utilisateur","className","Button","variant","size","onClick","firebase","auth","signOut","displayName","Avatar","alt","src","photoURL","Dossier","id","nom","couleur","datemodif","couverture","React","useState","anchorEl","setAncrageEle","gererFermer","style","backgroundColor","IconButton","aria-label","disableRipple","imgDefaut","formaterDate","aria-controls","aria-haspopup","event","currentTarget","Menu","keepMounted","open","Boolean","onClose","MenuItem","d","dateJs","Date","seconds","getDate","getMonth","getFullYear","apps","length","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","instanceFirebaseUI","firebaseui","AuthUI","firestore","ListeDossiers","etatDossiers","dossiers","setDossiers","useEffect","a","tabDossiers","collection","doc","uid","get","forEach","push","data","chercherDossiers","map","dossier","Accueil","start","signInOptions","GoogleAuthProvider","PROVIDER_ID","FacebookAuthProvider","GithubAuthProvider","signInFlow","AjouterDossier","ouvert","setOuvert","gererAjout","setNom","setCouverture","setCouleur","viderChamps","Dialog","aria-labelledby","DialogTitle","DialogContent","TextField","autoFocus","margin","label","type","fullWidth","onChange","e","target","value","defaultValue","width","triangle","onChangeComplete","hex","color","colors","DialogActions","Appli","setUtilisateur","onAuthStateChanged","util","set","courriel","email","datecompte","FieldValue","serverTimestamp","merge","objDossier","signets","add","then","refDoc","Fab","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d46e5ef7.chunk.js","sourcesContent":["import './Entete.scss';\r\nimport { Avatar } from '@material-ui/core'; \r\nimport Button from '@material-ui/core/Button';\r\nimport firebase from 'firebase/app';\r\n\r\nexport default function Entete({utilisateur}) {\r\n  return (\r\n    <header className=\"Entete\">\r\n      <div className=\"logo\">\r\n        Signets\r\n        <Button \r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          className=\"btn-deconnexion\"\r\n          onClick={() => firebase.auth().signOut()}\r\n        >\r\n          Déconnexion\r\n        </Button>\r\n      </div>\r\n      <div className=\"utilisateur\">{utilisateur.displayName} <Avatar className=\"avatar\" alt={utilisateur.displayName} src={utilisateur.photoURL} /></div>\r\n    </header>\r\n  );\r\n}","export default __webpack_public_path__ + \"static/media/couverture.2dc9ece9.webp\";","import './Dossier.scss'; \r\nimport { IconButton } from '@material-ui/core';\r\nimport SortIcon from '@material-ui/icons/Sort';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport React from 'react';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport imgDefaut from '../images/couverture.webp';\r\n\r\nexport default function Dossier({id, nom, couleur, datemodif, couverture}) {\r\n\r\n  // lorsque je chenge le com de anchorEl a ancrageEle, le menu ne s'affiche pas a la bonne place\r\n  const [anchorEl, setAncrageEle] = React.useState(null);\r\n\r\n  const gererCli = (event) => {\r\n    setAncrageEle(event.currentTarget);\r\n  };\r\n\r\n  const gererFermer = () => {\r\n    setAncrageEle(null);\r\n  };\r\n\r\n  return (\r\n    <article className=\"Dossier\" style={{backgroundColor: couleur}}>\r\n      <div className=\"couverture\">\r\n        <IconButton className=\"deplacer\" aria-label=\"déplacer\" disableRipple={true}>\r\n          <SortIcon />\r\n        </IconButton>\r\n        <img src={\r\n          // si il ny a pas de lien, si le champs est vide\r\n          couverture == \"\" ?\r\n          // on affiche limage pas defaut\r\n          imgDefaut\r\n          // sinon on affiche l'img que la personne a choisi\r\n          :\r\n          couverture\r\n          } alt={nom}/>\r\n      </div>\r\n      <div className=\"info\">\r\n        <h2>{nom}</h2>\r\n        <p>Modifié : {formaterDate(datemodif)}</p>\r\n      </div>\r\n      <IconButton aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={gererCli} className=\"modifier\" aria-label=\"modifier\" size=\"small\">\r\n        <MoreVertIcon />\r\n      </IconButton>\r\n      <Menu\r\n        id=\"simple-menu\"\r\n        anchorEl={anchorEl}\r\n        keepMounted\r\n        open={Boolean(anchorEl)}\r\n        onClose={gererFermer}\r\n      >\r\n        <MenuItem onClick={gererFermer}>Modifier</MenuItem>\r\n        <MenuItem onClick={gererFermer}>Supprimer</MenuItem>\r\n      </Menu>\r\n    </article>\r\n  );\r\n}\r\n\r\n/**\r\n * Formate les objets date de Firestore et retourne une chaîne de caractères\r\n * @param {Object} d Objet date retourné par Firestore\r\n * @returns String date formatée en français\r\n */\r\nfunction formaterDate(d) {\r\n  const dateJs = d ? new Date(d.seconds*1000) : new Date();\r\n  const mois = ['janvier', 'février', 'mars', 'avril', 'mai', 'juin', 'juillet', 'août', 'septembre', 'octobre', 'novembre', 'décembre'];\r\n  return `${dateJs.getDate()} ${mois[dateJs.getMonth()]} ${dateJs.getFullYear()}`;\r\n}","import firebase from 'firebase/app';\r\nimport * as firebaseui from 'firebaseui';\r\nimport 'firebase/firestore';\r\n\r\n// Configuration (mettez-y les vôtres !)\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDBkHd3rUW8dZ5D07SUpNkPG7yMxRuWbdM\",\r\n  authDomain: \"panier-achat-lt.firebaseapp.com\",\r\n  databaseURL: \"https://panier-achat-lt-default-rtdb.firebaseio.com\",\r\n  projectId: \"panier-achat-lt\",\r\n  storageBucket: \"panier-achat-lt.appspot.com\",\r\n  messagingSenderId: \"531000313975\",\r\n  appId: \"1:531000313975:web:21d1dea3f4812724791e72\",\r\n  measurementId: \"G-Z67T2LSR7H\"\r\n};\r\n\r\n// Initialiser Firebase\r\nif(!firebase.apps.length) {\r\n  firebase.initializeApp(firebaseConfig);\r\n}\r\n\r\n// Initialiser FirebaseUI\r\nexport const instanceFirebaseUI = new firebaseui.auth.AuthUI(firebase.auth());\r\n\r\n// Initialiser Firestore\r\nexport const firestore = firebase.firestore();\r\n","import './ListeDossiers.scss';\r\nimport Dossier from './Dossier';\r\nimport { firestore } from '../firebase';\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport default function ListeDossiers({utilisateur, etatDossiers}) {\r\n  // État des dossiers (notez que cet état est défini dans le composant parent \"Appli\", et passé ici dans les props)\r\n  const [dossiers, setDossiers] = etatDossiers;\r\n\r\n  useEffect(\r\n    () => {\r\n      // On crée une fonction asynchrone pour pouvoir utiliser la syntaxe await sur les requêtes asynchrones à Firestore\r\n      async function chercherDossiers() {\r\n        // Tableau qui va recevoir nos dossiers de Firestore\r\n        const tabDossiers = [];\r\n        // La requête à Firestore utilise 'await' pour retourner la réponse\r\n        const reponse = await firestore.collection('utilisateurs-ex4').doc(utilisateur.uid).collection('dossiers').get();\r\n        // On traverse la réponse ...\r\n        reponse.forEach(\r\n          // ... et pour chaque doc dans la réponse on ajoute un objet dans tabDossiers\r\n          doc => {\r\n            tabDossiers.push({id: doc.id, ...doc.data()})\r\n          }\r\n          // Remarquez que le 'id' ne fait pas partie des attributs de données des documents sur Firestore, et il faut l'extraire séparément avec la propriété 'id'. Remarquez aussi l'utilisation de l'opérateur de décomposition (spread operator (...))\r\n        );\r\n        // Une fois notre réponse traitée au complet et le tableau tabDossiers renpli avec tous les objets représentants les documents 'dossiers' trouvés, nous pouvons faire la mutation de l'état de la variable 'dossiers' (en utilisant le mutateur setDossiers) pour forcer un 'rerender' (réaffichage) du composant par React\r\n        setDossiers(tabDossiers);\r\n      }\r\n      // Faut pas oublier d'appeler la fonction\r\n      chercherDossiers();\r\n    }, []\r\n  );\r\n\r\n  return (\r\n    <ul className=\"ListeDossiers\">\r\n      { \r\n        // si le dossier contient un document (n'est pas vide)\r\n        dossiers.length != 0 ?\r\n        \r\n        dossiers.map( \r\n          dossier =>  <li key={dossier.id}><Dossier {...dossier} /></li>\r\n        )\r\n        // si le dossier est vide\r\n        :\r\n        <div className=\"vide\">\r\n          Votre liste de dossier est vide\r\n          <p>:(</p>\r\n        </div>\r\n      }\r\n    </ul>\r\n  );\r\n}","import './Accueil.scss';\r\nimport firebase from 'firebase/app';\r\nimport { instanceFirebaseUI } from '../firebase';\r\nimport 'firebaseui/dist/firebaseui.css';\r\nimport { useEffect } from 'react';\r\n\r\nexport default function Accueil() {\r\n  useEffect(\r\n    () => instanceFirebaseUI.start(\"#firebaseui-widget\", {\r\n      signInOptions: [\r\n        firebase.auth.GoogleAuthProvider.PROVIDER_ID,\r\n        firebase.auth.FacebookAuthProvider.PROVIDER_ID,\r\n        firebase.auth.GithubAuthProvider.PROVIDER_ID\r\n      ],\r\n      signInFlow: 'popup'\r\n    }, [])\r\n  )\r\n\r\n  return (\r\n    <div className=\"Accueil\">\r\n      <h3 className=\"logo\">Signets <span>beta</span></h3>\r\n      <h2 className=\"amorce\">Organisez vos signets Web, <br />Simple comme bonjour !</h2>\r\n      <h4 className=\"connexion-etiquette\">Connexion à Signets</h4>\r\n      <div id=\"firebaseui-widget\"></div>\r\n    </div>\r\n  )\r\n}","import Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { useState } from 'react';\r\nimport { TwitterPicker } from 'react-color';\r\n\r\nexport default function AjouterDossier({ouvert, setOuvert, gererAjout}) {\r\n  const [nom, setNom] = useState('');\r\n  const [couverture, setCouverture] = useState('');\r\n  const [couleur, setCouleur] = useState('#537169');\r\n\r\n  function viderChamps() {\r\n    setNom('');\r\n    setCouverture('');\r\n    setCouleur('#537169');\r\n  }\r\n\r\n  const btnAnnuler = {\r\n    color: 'white',\r\n    backgroundColor: 'red'\r\n  };\r\n\r\n  const btnAjouter = {\r\n    color: 'white',\r\n    backgroundColor : 'green'\r\n  }\r\n\r\n  return (\r\n    <div className=\"AjouterDossier\">\r\n      <Dialog open={ouvert} onClose={()=>setOuvert(false)} aria-labelledby=\"form-dialog-title\">\r\n        <DialogTitle id=\"form-dialog-title\">Ajouter un dossier</DialogTitle>\r\n        <DialogContent>\r\n          <TextField\r\n            autoFocus\r\n            // margin = \"dense\" est la reponse de A) a.\r\n            margin=\"dense\"\r\n            id=\"nomDossier\"\r\n            label=\"Nom du dossier\"\r\n            type=\"text\"\r\n            fullWidth\r\n            onChange={(e) => setNom(e.target.value)}\r\n            defaultValue={nom}\r\n          />\r\n          <TextField\r\n            // margin = \"dense\" est la reponse de A) a.\r\n            margin=\"dense\"\r\n            id=\"urlImage\"\r\n            label=\"Adresse de l'image de couverture\"\r\n            type=\"text\"\r\n            fullWidth\r\n            onChange={(e) => setCouverture(e.target.value)}\r\n            defaultValue={couverture}\r\n          />\r\n          <TwitterPicker \r\n            width=\"100%\" \r\n            triangle=\"hide\" \r\n            onChangeComplete={(couleur, e) => setCouleur(couleur.hex)}\r\n            color={couleur}\r\n            colors= {[\"#ffb3ba\", \"#ffdfba\", \"#ffffba\", \"#baffc9\", \"#bae1ff\", \"#bdb2ff\"]}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button style={btnAnnuler} onClick={()=>{setOuvert(false); viderChamps()}} color=\"primary\">\r\n            Annuler\r\n          </Button>\r\n          <Button style={btnAjouter} onClick={() => {nom !== '' && gererAjout(nom, couverture, couleur); viderChamps(); }} color=\"primary\">\r\n            Ajouter\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}","import './Appli.scss';\r\nimport Entete from './Entete';\r\nimport ListeDossiers from './ListeDossiers';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Accueil from './Accueil';\r\nimport { useEffect, useState } from 'react';\r\nimport firebase from 'firebase/app';\r\nimport {firestore} from '../firebase';\r\nimport AjouterDossier from './AjouterDossier';\r\n\r\nexport default function Appli() {\r\n  // État de l'utilisateur\r\n  const [utilisateur, setUtilisateur] = useState(null);\r\n\r\n  // État des dossiers\r\n  const etatDossiers = useState([]);\r\n  const [dossiers, setDossiers] = etatDossiers;\r\n\r\n  // État de la boîte de dialogue \"Ajout Dossier\"\r\n  const [ouvert, setOuvert] = useState(false);\r\n\r\n  // Valider la connexion utilisateur\r\n  useEffect(\r\n    () => {\r\n     firebase.auth().onAuthStateChanged(\r\n       util => {\r\n        setUtilisateur(util);\r\n        // Créer le profil de l'utilisateur dans Firestore si util n'est pas NULL\r\n        if(util) {\r\n          firestore.collection('utilisateurs-ex4').doc(util.uid).set({\r\n            nom: util.displayName, \r\n            courriel: util.email, \r\n            datecompte: firebase.firestore.FieldValue.serverTimestamp()\r\n          }, {merge: true});\r\n        }\r\n      }\r\n     );\r\n    }, []\r\n  );\r\n  \r\n  // Ajouter un dossier\r\n  function gererAjout(nom, couverture, couleur) {\r\n    // Objet à ajouter dans la collection \"dossiers\" sur Firestore\r\n    const objDossier = {\r\n      nom: nom,\r\n      couverture: couverture,\r\n      couleur: couleur,\r\n      datemodif: firebase.firestore.FieldValue.serverTimestamp(),\r\n      signets: []\r\n    };\r\n    // Ajout de l'objet\r\n    firestore.collection('utilisateurs-ex4').doc(utilisateur.uid).collection('dossiers').add(objDossier).then(\r\n      refDoc => {\r\n        // Puis on utilise la référence retournée pour chercher le détail du dossier\r\n        refDoc.get().then(\r\n          // Et on modifie l'état des dossiers en joignant ce dernier pour forcer un \"rerender\" du composant \"ListeDossiers\"\r\n          doc => setDossiers([...dossiers, {...doc.data(), id: doc.id}])\r\n        );\r\n        // On oublie pas de fermer la boîte de dialogue\r\n        setOuvert(false);\r\n      }\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"Appli\">\r\n      {\r\n        // Un utilisateur est connecté ?\r\n        utilisateur ?\r\n          <>\r\n            <Entete utilisateur={utilisateur} />\r\n            <section className=\"contenu-principal\">\r\n              <ListeDossiers utilisateur={utilisateur} etatDossiers={etatDossiers} />\r\n              <AjouterDossier ouvert={ouvert} setOuvert={setOuvert} gererAjout={gererAjout} />\r\n              <Fab onClick={() => setOuvert(true)} className=\"ajoutRessource\" color=\"primary\" aria-label=\"Ajouter dossier\">\r\n                <AddIcon />\r\n              </Fab>\r\n            </section>\r\n          </>\r\n        // Sinon :\r\n        :\r\n          <Accueil />\r\n      }\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.scss';\r\nimport Appli from './composants/Appli';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Appli />\r\n  </React.StrictMode>,\r\n  document.getElementById('racine')\r\n);\r\n"],"sourceRoot":""}